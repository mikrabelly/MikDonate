<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MikDonate - Total Donasi</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f0f2f5; margin:0; padding:0; }
    header { background:#4a90e2; color:white; padding:15px; text-align:center; font-size:1.5em; font-weight:bold; }
    .container { max-width:800px; margin:20px auto; padding:0 15px; }
    .post { background:white; padding:15px; margin-bottom:15px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
    .post h3 { margin-top:0; }
    .donate-buttons { margin-top:10px; }
    .donate-buttons button { padding:8px 15px; margin-right:10px; border:none; border-radius:5px; cursor:pointer; color:white; font-weight:bold; }
    .gopay { background-color:#00b14f; }
    .dana { background-color:#0055ff; }
    .add-post { margin-bottom:20px; background:#fff; padding:15px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
    .add-post input, .add-post textarea { width:100%; padding:8px; margin-bottom:10px; border-radius:5px; border:1px solid #ccc; }
    .add-post button { background:#4a90e2; color:white; padding:10px; border:none; border-radius:5px; cursor:pointer; font-weight:bold; }

    /* Modal QR Code */
    .modal { display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; overflow:auto; background:rgba(0,0,0,0.6); }
    .modal-content { background:#fff; margin:15% auto; padding:20px; border-radius:10px; width:250px; text-align:center; position:relative; }
    .close { position:absolute; top:5px; right:10px; color:#aaa; font-size:24px; font-weight:bold; cursor:pointer; }
  </style>
</head>
<body>
  <header>MikDonate - Total Donasi</header>

  <div class="container">
    <div class="add-post">
      <h3>Buat Postingan Baru</h3>
      <input type="text" id="username" placeholder="Nama Pengguna">
      <textarea id="content" rows="3" placeholder="Isi postingan"></textarea>
      <button onclick="addPost()">Tambah Postingan</button>
    </div>

    <div id="posts">
      <div class="post" data-total="0">
        <h3>Pengguna: Admin</h3>
        <p>Selamat datang di MikDonate! Klik tombol donate untuk mendukung.</p>
        <div class="donate-buttons">
          <button class="gopay" onclick="showQRCode('GoPay', this)">Donate via GoPay</button>
          <button class="dana" onclick="showQRCode('Dana', this)">Donate via Dana</button>
        </div>
        <p>Total Donasi: Rp <span class="total">0</span></p>
      </div>
    </div>
  </div>

  <!-- Modal QR -->
  <div id="qrModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h3 id="qrTitle"></h3>
      <div id="qrCode"></div>
      <input type="number" id="donateAmount" placeholder="Masukkan nominal" style="margin-top:10px; width:80%; padding:5px; border-radius:5px; border:1px solid #ccc;">
      <button onclick="addDonation()">Konfirmasi Donasi</button>
    </div>
  </div>

  <footer>&copy; 2025 MikDonate - Scan QR untuk Donasi</footer>

  <!-- QRCode.js library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script>
    // Nomor GoPay & Dana langsung pakai milik kamu
    const gopayNumber = "082148930950";
    const danaNumber = "082148930950";

    let currentPost = null;
    let currentWallet = '';

    function showQRCode(wallet, btn) {
      currentPost = btn.closest('.post');
      currentWallet = wallet;
      const qrDiv = document.getElementById('qrCode');
      qrDiv.innerHTML = '';
      let qrValue = wallet === 'GoPay' ? `https://link.darigopay.com/${gopayNumber}` : `https://link.daridana.com/${danaNumber}`;
      document.getElementById('qrTitle').innerText = `Donate via ${wallet}`;
      new QRCode(qrDiv, { text: qrValue, width: 180, height: 180 });
      document.getElementById('donateAmount').value = '';
      document.getElementById('qrModal').style.display = 'block';
    }

    function closeModal() {
      document.getElementById('qrModal').style.display = 'none';
    }

    window.onclick = function(event) {
      if(event.target == document.getElementById('qrModal')) {
        closeModal();
      }
    }

    function addDonation() {
      const amountInput = document.getElementById('donateAmount');
      let amount = parseInt(amountInput.value);
      if(!amount || amount <= 0) {
        alert('Masukkan nominal valid!');
        return;
      }
      let total = parseInt(currentPost.dataset.total);
      total += amount;
      currentPost.dataset.total = total;
      currentPost.querySelector('.total').innerText = total;
      alert(`Terima kasih! Donasi Rp${amount} via ${currentWallet} (simulasi).`);
      closeModal();
    }

    function addPost() {
      const username = document.getElementById('username').value.trim();
      const content = document.getElementById('content').value.trim();
      if(username === '' || content === '') { alert('Isi nama dan postingan!'); return; }

      const postsDiv = document.getElementById('posts');
      const postDiv = document.createElement('div');
      postDiv.className = 'post';
      postDiv.dataset.total = 0;
      postDiv.innerHTML = `
        <h3>Pengguna: ${username}</h3>
        <p>${content}</p>
        <div class="donate-buttons">
          <button class="gopay" onclick="showQRCode('GoPay', this)">Donate via GoPay</button>
          <button class="dana" onclick="showQRCode('Dana', this)">Donate via Dana</button>
        </div>
        <p>Total Donasi: Rp <span class="total">0</span></p>
      `;
      postsDiv.prepend(postDiv);
      document.getElementById('username').value = '';
      document.getElementById('content').value = '';
    }
  </script>
</body>
</html>

